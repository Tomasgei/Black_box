{% extends "tradingapp/dashboard_base.html" %}
{% load static %}
{% block content %}


<h1 class="mt-3">Stock Portfolio</h1>
<form action="{% url 'portfolio' %}" class="d-inline-flex mb-2" method= "POST">
    {% csrf_token %}
    <input class="form-control me-2" type="search" placeholder="Type stock ticker" aria-label="Search" name = "Ticker">
    <div class="input-group">
    <span class="input-group-text">
        <svg class="icon icon-xs" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
    </span>
    <input data-datepicker="" class="form-control me-2" id="birthday" type="text" placeholder="dd/mm/yyyy" required>
    </div>
    
    <input class="form-control me-2" type="search" placeholder="Entry price" aria-label="Search" name = "ticker">

    <button class="col-2 btn btn-success" type="submit">Add Stock</button>
</form>

    

<table class="table table-striped table-hover table-bordered">
  <thead class="table-dark" >
    <tr>
      <th scope="col">Symbol</th>
      <th scope="col">Company Name</th>
      <th scope="col">Last Price</th>
      <th scope="col">Previous Close</th>
      <th scope="col">Market Cap</th>
      <th scope="col">ytdChange</th>
      <th scope="col">52-W High</th>
      <th scope="col">52-W Low</th>
      <th scope="col">Market Status</th>
      <th scope="col">Delete</th>
    </tr>
  </thead>
  <tbody>
    {% if mylist %}
          {% for item in mylist  %}
          <tr>
            <th scope="row">{{item.1.symbol}}</th>
            <td>{{item.1.companyName}}</td>
            <td>${{item.1.latestPrice}}</td>
            <td>${{item.1.previousClose}}</td>
            <td>${{item.1.marketCap}}</td>
            <td>{{item.1.ytdChange |floatformat }}%</td>
            <td>${{item.1.week52High}}</td>
            <td>${{item.1.week52Low}}</td>
            {% ifequal item.1.isUSMarketOpen "True"%}
            <td>Market is Open</td>
            {% else %}
            <td>Market is Closed</td>
            {% endifequal %}
            <td><a class= "btn btn-warning m-1 " href="{% url 'delete' item.0.id %}">Delete</a></td>
          </tr>
          {% endfor %}     
  </tbody>
</table>
{% endif %}
<br/><br/>

{% endblock %}